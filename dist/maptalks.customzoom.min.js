/*!
 * maptalks.customzoom v0.1.0
 * LICENSE : MIT
 * (c) 2016-2017 maptalks.org
 */
/*!
 * requires maptalks@^0.25.0 
 */
!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("maptalks")):"function"==typeof define&&define.amd?define(["exports","maptalks"],o):o(t.maptalks=t.maptalks||{},t.maptalks)}(this,function(t,o){"use strict";function e(t,o){for(var e=Object.getOwnPropertyNames(o),i=0;i<e.length;i++){var n=e[i],s=Object.getOwnPropertyDescriptor(o,n);s&&s.configurable&&void 0===t[n]&&Object.defineProperty(t,n,s)}return t}function i(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function n(t,o){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?t:o}function s(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):e(t,o))}var r={position:"top-left",slider:!0,zoomLevel:!1,navPan:!0},a=function(t){function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),n(this,t.call(this,o))}return s(e,t),e.prototype.buildOn=function(t){var e=this.options,i=o.DomUtil.createEl("div","maptalks-zoom");e.navPan&&this._createNavPan(t,i);var n=o.DomUtil.createEl("div","maptalks-zoom-slider-custom"),s=o.DomUtil.createEl("a","maptalks-zoom-zoomin-custom");if(s.href="javascript:;",n.appendChild(s),this._zoomInButton=s,e.slider){var r=o.DomUtil.createEl("div","maptalks-zoom-slider-box-custom"),a=o.DomUtil.createEl("div","maptalks-zoom-slider-ruler-custom"),l=o.DomUtil.createEl("span","maptalks-zoom-slider-reading-custom"),p=o.DomUtil.createEl("span","maptalks-zoom-slider-dot-custom");n.appendChild(r),a.appendChild(l),a.appendChild(p),r.appendChild(a),this._sliderBox=r,this._sliderRuler=a,this._sliderReading=l,this._sliderDot=p}var m=o.DomUtil.createEl("a","maptalks-zoom-zoomout-custom");return m.href="javascript:;",n.appendChild(m),this._zoomOutButton=m,i.appendChild(n),t.on("_zoomend _zoomstart _spatialreferencechange",this._update,this),this._update(),this._registerDomEvents(),i},e.prototype.onRemove=function(){this.getMap().off("_zoomend _zoomstart _spatialreferencechange",this._update,this),this._zoomInButton&&o.DomUtil.off(this._zoomInButton,"click",this._onZoomInClick,this),this._zoomOutButton&&o.DomUtil.off(this._zoomOutButton,"click",this._onZoomOutClick,this),this._sliderRuler&&(o.DomUtil.off(this._sliderRuler,"click",this._onClickRuler,this),this.dotDragger.disable(),delete this.dotDragger)},e.prototype._createNavPan=function(t,e){var i=o.DomUtil.createEl("div","maptalks-zoom-zoomPan-custom"),n=o.DomUtil.createEl("div","maptalks-zoom-zoomPan-left-custom");n.onmouseover=function(){n.style.backgroundPosition="-61px -19px"},n.onmouseout=function(){n.style.backgroundPosition="-5px -19px"},n.onclick=function(){this._PanTo({x:-200,y:0})}.bind(this);var s=o.DomUtil.createEl("div","maptalks-zoom-zoomPan-right-custom");s.onmouseover=function(){s.style.backgroundPosition="-92px -19px"},s.onmouseout=function(){s.style.backgroundPosition="-36px -19px"},s.onclick=function(){this._PanTo({x:200,y:0})}.bind(this);var r=o.DomUtil.createEl("div","maptalks-zoom-zoomPan-up-custom");r.onmouseover=function(){r.style.backgroundPosition="-75px -5px"},r.onmouseout=function(){r.style.backgroundPosition="-19px -5px"},r.onclick=function(){this._PanTo({x:0,y:-200})}.bind(this);var a=o.DomUtil.createEl("div","maptalks-zoom-zoomPan-down-custom");a.onmouseover=function(){a.style.backgroundPosition="-75px -32px"},a.onmouseout=function(){a.style.backgroundPosition="-19px -32px"},a.onclick=function(){this._PanTo({x:0,y:200})}.bind(this),i.appendChild(r),i.appendChild(a),i.appendChild(n),i.appendChild(s),e.appendChild(i),this._panDOM=i},e.prototype._PanTo=function(t){var o=this.getMap(),e=o.getCenter(),i=o.coordinateToPoint(e);i.x+=t.x,i.y+=t.y,e=o.pointToCoordinate(i,o.getZoom()),o.panTo(e)},e.prototype._update=function(){var t=this.getMap();if(this._sliderBox){var o=10*(t.getMaxZoom()-t.getMinZoom());this._sliderBox.style.height=o+14+"px",this._sliderRuler.style.height=o+14+"px";var e=10*(t.getZoom()-t.getMinZoom());this._sliderReading.style.height=e+"px",this._sliderDot.style.top=o-e+"px"}},e.prototype._updateText=function(){if(this._levelDOM){var t=this.getMap(),e=t.getZoom();o.Util.isInteger(e)||(e=e.toFixed(1)),this._levelDOM.innerHTML=e}},e.prototype._registerDomEvents=function(){this._zoomInButton&&o.DomUtil.on(this._zoomInButton,"click",this._onZoomInClick,this),this._zoomOutButton&&o.DomUtil.on(this._zoomOutButton,"click",this._onZoomOutClick,this),this._sliderRuler&&(o.DomUtil.on(this._sliderRuler,"click",this._onClickRuler,this),this.dotDragger=new o.DragHandler(this._sliderDot,{ignoreMouseleave:!0}),this.dotDragger.on("dragstart",this._onDotDragstart,this).on("dragend",this._onDotDrag,this).enable())},e.prototype._onZoomInClick=function(t){o.DomUtil.preventDefault(t),this.getMap().zoomIn()},e.prototype._onZoomOutClick=function(t){o.DomUtil.preventDefault(t),this.getMap().zoomOut()},e.prototype._onClickRuler=function(t){o.DomUtil.preventDefault(t);var e=this.getMap(),i=o.DomUtil.getEventContainerPoint(t,this._sliderRuler),n=i.y,s=e.getMaxZoom(),r=Math.floor(s-n/10);e.setZoom(r)},e.prototype._onDotDragstart=function(t){o.DomUtil.preventDefault(t.domEvent);var e=this.getMap(),i=e.getSize().toPoint()._multi(.5);e.onZoomStart(e.getZoom(),i)},e.prototype._onDotDrag=function(t){o.DomUtil.preventDefault(t.domEvent);var e=this.getMap(),i=e.getSize().toPoint()._multi(.5),n=o.DomUtil.getEventContainerPoint(t.domEvent,this._sliderRuler),s=e.getMaxZoom(),r=e.getMinZoom(),a=n.y,l=s-a/10;s<l?(l=s,a=0):r>l&&(l=r,a=10*(s-r)),"dragging"===t.type?e.onZooming(l,i,1):"dragend"===t.type&&(this.options.seamless?e.onZoomEnd(l,i):e.onZoomEnd(Math.round(l),i)),this._sliderDot.style.top=a+"px",this._sliderReading.style.height=10*(e.getZoom()-r)+"px"},e}(o.control.Control);a.mergeOptions(r),t.CustomZoom=a,Object.defineProperty(t,"__esModule",{value:!0}),"undefined"!=typeof console&&console.log("maptalks.customzoom v0.1.0, requires maptalks@^0.25.0.")});